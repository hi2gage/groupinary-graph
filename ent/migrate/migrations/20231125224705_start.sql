-- Create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "auth_id" character varying NOT NULL, "first_name" character varying NULL, "last_name" character varying NULL, PRIMARY KEY ("id"));
-- Create "groups" table
CREATE TABLE "groups" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "description" character varying NOT NULL, PRIMARY KEY ("id"));
-- Create "words" table
CREATE TABLE "words" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "description" character varying NOT NULL, "group_root_words" bigint NULL, "user_words" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "words_groups_rootWords" FOREIGN KEY ("group_root_words") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "words_users_words" FOREIGN KEY ("user_words") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- Create "definitions" table
CREATE TABLE "definitions" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "create_time" timestamptz NOT NULL, "update_time" timestamptz NOT NULL, "description" character varying NOT NULL, "user_definitions" bigint NULL, "word_definitions" bigint NULL, PRIMARY KEY ("id"), CONSTRAINT "definitions_users_definitions" FOREIGN KEY ("user_definitions") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT "definitions_words_definitions" FOREIGN KEY ("word_definitions") REFERENCES "words" ("id") ON UPDATE NO ACTION ON DELETE SET NULL);
-- Create "user_groups" table
CREATE TABLE "user_groups" ("user_id" bigint NOT NULL, "group_id" bigint NOT NULL, PRIMARY KEY ("user_id", "group_id"), CONSTRAINT "user_groups_group_id" FOREIGN KEY ("group_id") REFERENCES "groups" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "user_groups_user_id" FOREIGN KEY ("user_id") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "word_descendants" table
CREATE TABLE "word_descendants" ("word_id" bigint NOT NULL, "parent_id" bigint NOT NULL, PRIMARY KEY ("word_id", "parent_id"), CONSTRAINT "word_descendants_parent_id" FOREIGN KEY ("parent_id") REFERENCES "words" ("id") ON UPDATE NO ACTION ON DELETE CASCADE, CONSTRAINT "word_descendants_word_id" FOREIGN KEY ("word_id") REFERENCES "words" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
